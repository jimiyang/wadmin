{"remainingRequest":"/Users/yanglina/wadmin/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!/Users/yanglina/wadmin/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!/Users/yanglina/wadmin/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js??vue-loader-options!/Users/yanglina/wadmin/src/view/module/msg/webhook/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yanglina/wadmin/src/view/module/msg/webhook/index.vue","mtime":1576046447677},{"path":"/Users/yanglina/wadmin/.babelrc","mtime":1576127290134},{"path":"/Users/yanglina/wadmin/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanglina/wadmin/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yanglina/wadmin/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanglina/wadmin/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: 'MsgHttpLogs',\n\n  data() {\n    return {\n      drawer: false,\n      currentRow: {},\n      loading: false,\n      pageInfo: {\n        total: 0,\n        page: 1,\n        limit: 10,\n        url: '',\n        type: '',\n        result: ''\n      },\n      columns: [{\n        type: 'selection',\n        width: 60,\n        align: 'center'\n      }, {\n        title: '通知标识',\n        key: 'msgId',\n        width: 200\n      }, {\n        title: '通知地址',\n        key: 'url',\n        width: 350\n      }, {\n        title: '业务类型',\n        key: 'type',\n        width: 150\n      }, {\n        title: '通知结果',\n        key: 'result',\n        slot: 'status',\n        width: 100\n      }, {\n        title: '重试次数',\n        key: 'retryNums',\n        width: 100\n      }, {\n        title: '通知次数',\n        key: 'totalNums',\n        width: 100\n      }, {\n        title: '当前重试时间',\n        key: 'delay',\n        render: (h, params) => {\n          return h('div', (params.row.delay ? params.row.delay / 1000 : 0) + ' s');\n        },\n        width: 200\n      }, {\n        title: '最后修改时间',\n        key: 'updateTime'\n      }, {\n        title: '详情',\n        slot: 'detail',\n        fixed: 'right',\n        width: 150\n      }],\n      data: []\n    };\n  },\n\n  methods: {\n    openDrawer(data) {\n      this.currentRow = data;\n      this.drawer = true;\n    },\n\n    handleSearch(page) {\n      if (page) {\n        this.pageInfo.page = page;\n      }\n\n      this.loading = true;\n      getNotifyHttpLogs(this.pageInfo).then(res => {\n        this.data = res.data.records;\n        this.pageInfo.total = parseInt(res.data.total);\n      }).finally(() => {\n        this.loading = false;\n      });\n    },\n\n    handleResetForm(form) {\n      this.$refs[form].resetFields();\n    },\n\n    handlePage(current) {\n      this.pageInfo.page = current;\n      this.handleSearch();\n    },\n\n    handlePageSize(size) {\n      this.pageInfo.limit = size;\n      this.handleSearch();\n    }\n\n  },\n  mounted: function () {\n    this.handleSearch();\n  }\n};",{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <Card shadow>\n      <Form ref=\"searchForm\"\n            :model=\"pageInfo\"\n            inline\n            :label-width=\"80\">\n        <FormItem label=\"通知地址\" prop=\"url\">\n          <Input type=\"text\" v-model=\"pageInfo.url\" placeholder=\"请输入关键字\"/>\n        </FormItem>\n        <FormItem label=\"业务类型\" prop=\"type\">\n          <Input type=\"text\" v-model=\"pageInfo.type\" placeholder=\"请输入关键字\"/>\n        </FormItem>\n        <FormItem label=\"通知结果\" prop=\"result\">\n          <Select v-model=\"pageInfo.result\">\n            <Option value=\"\">全部</Option>\n            <Option value=\"1\">成功</Option>\n            <Option value=\"0\">失败</Option>\n          </Select>\n        </FormItem>\n        <FormItem>\n          <Button type=\"primary\" @click=\"handleSearch(1)\">查询</Button>&nbsp;\n          <Button @click=\"handleResetForm('searchForm')\">重置</Button>\n        </FormItem>\n      </Form>\n\n      <Table border :columns=\"columns\" :data=\"data\" :loading=\"loading\">\n        <template slot=\"status\" slot-scope=\"{ row }\">\n          <Badge v-if=\"row.result===1\" status=\"success\" text=\"成功\"/>\n          <Badge v-else=\"\" status=\"error\" text=\"失败\"/>\n        </template>\n        <template slot=\"detail\" slot-scope=\"{ row }\">\n          <a @click=\"openDrawer(row)\">详情</a>\n        </template>\n      </Table>\n      <Page transfer :total=\"pageInfo.total\" :current=\"pageInfo.page\" :page-size=\"pageInfo.limit\" show-elevator\n            show-sizer\n            show-total\n            @on-change=\"handlePage\" @on-page-size-change='handlePageSize'></Page>\n    </Card>\n    <Drawer width=\"50\" :closable=\"false\" v-model=\"drawer\">\n      <div slot=\"header\">\n        <Badge v-if=\"currentRow.result===1\" status=\"success\"/>\n        <Badge v-else=\"\" status=\"error\"/>\n        {{currentRow.url}}\n\n      </div>\n      <div>\n        <h3>执行参数</h3>\n        <pre>\n              {{ currentRow.data ? JSON.stringify(JSON.parse(currentRow.data), null, 2) : ''}}\n        </pre>\n      </div>\n    </Drawer>\n  </div>\n</template>\n\n<script>\n  export default {\n    name: 'MsgHttpLogs',\n    data () {\n      return {\n        drawer: false,\n        currentRow: {},\n        loading: false,\n        pageInfo: {\n          total: 0,\n          page: 1,\n          limit: 10,\n          url: '',\n          type: '',\n          result: ''\n        },\n        columns: [\n          {\n            type: 'selection',\n            width: 60,\n            align: 'center'\n          },\n          {\n            title: '通知标识',\n            key: 'msgId',\n            width: 200\n          },\n          {\n            title: '通知地址',\n            key: 'url',\n            width: 350\n          },\n          {\n            title: '业务类型',\n            key: 'type',\n            width: 150\n          },\n          {\n            title: '通知结果',\n            key: 'result',\n            slot: 'status',\n            width: 100\n          },\n          {\n            title: '重试次数',\n            key: 'retryNums',\n            width: 100\n          },\n          {\n            title: '通知次数',\n            key: 'totalNums',\n            width: 100\n          },\n          {\n            title: '当前重试时间',\n            key: 'delay',\n            render: (h, params) => {\n              return h('div', (params.row.delay ? params.row.delay / 1000 : 0) + ' s')\n            },\n            width: 200\n          },\n          {\n            title: '最后修改时间',\n            key: 'updateTime'\n          },\n          {\n            title: '详情',\n            slot: 'detail',\n            fixed: 'right',\n            width: 150\n          }\n        ],\n        data: []\n      }\n    },\n    methods: {\n      openDrawer (data) {\n        this.currentRow = data\n        this.drawer = true\n      },\n      handleSearch (page) {\n        if (page) {\n          this.pageInfo.page = page\n        }\n        this.loading = true\n        getNotifyHttpLogs(this.pageInfo).then(res => {\n          this.data = res.data.records\n          this.pageInfo.total = parseInt(res.data.total)\n        }).finally(() => {\n          this.loading = false\n        })\n      },\n      handleResetForm (form) {\n        this.$refs[form].resetFields()\n      },\n      handlePage (current) {\n        this.pageInfo.page = current\n        this.handleSearch()\n      },\n      handlePageSize (size) {\n        this.pageInfo.limit = size\n        this.handleSearch()\n      }\n    },\n    mounted: function () {\n      this.handleSearch()\n    }\n  }\n</script>\n"],"sourceRoot":"src/view/module/msg/webhook"}]}