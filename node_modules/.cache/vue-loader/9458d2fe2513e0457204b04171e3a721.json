{"remainingRequest":"/Users/yanglina/wadmin/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js??vue-loader-options!/Users/yanglina/wadmin/src/view/module/account/setting.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"/Users/yanglina/wadmin/src/view/module/account/setting.vue","mtime":1576046502517},{"path":"/Users/yanglina/wadmin/node_modules/_css-loader@1.0.1@css-loader/index.js","mtime":499162500000},{"path":"/Users/yanglina/wadmin/node_modules/_vue-loader@15.7.2@vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/yanglina/wadmin/node_modules/_less-loader@4.1.0@less-loader/dist/cjs.js","mtime":1576127051803},{"path":"/Users/yanglina/wadmin/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanglina/wadmin/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.account-setting {\n  &-con {\n    height: ~\"calc(100vh - 176px)\";\n    display: inline-block;\n    vertical-align: top;\n    position: relative;\n    &.left-con {\n      border-right: 1px solid #e6e6e6;\n    }\n    &.view-con {\n      position: absolute;\n      left: 264px;\n      top: 16px;\n      right: 16px;\n      bottom: 16px;\n      overflow: auto;\n      padding: 12px 20px 0;\n    }\n  }\n}\n",{"version":3,"sources":["setting.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"setting.vue","sourceRoot":"src/view/module/account","sourcesContent":["<template>\n  <Card shadow>\n    <div>\n      <div class=\"account-setting-con left-con\">\n        <Menu active-name=\"profile\" @on-select=\"handleSelect\">\n          <MenuItem name=\"profile\">\n            <span>基本信息</span>\n          </MenuItem>\n          <MenuItem name=\"security\">\n            <span>安全设置</span>\n          </MenuItem>\n        </Menu>\n      </div>\n      <div class=\"account-setting-con view-con\">\n        <Form v-if=\"currentSelect==='profile'\" ref=\"userForm\" :rules=\"formItemRules\" :model=\"profile\">\n          <h3>\n            <span>基本信息</span>\n          </h3>\n          <Row>\n            <Col span=\"8\">\n            <FormItem label=\"昵称\" prop=\"nickName\">\n              <Input v-model=\"profile.nickName\" placeholder=\"请输入内容\"></Input>\n            </FormItem>\n            <FormItem label=\"描述\">\n              <Input v-model=\"profile.userDesc\" type=\"textarea\" placeholder=\"请输入内容\"></Input>\n            </FormItem>\n            </Col>\n            <Col span=\"8\">\n            <FormItem label=\"头像\" prop=\"avatar\">\n              <Avatar style=\"height: 128px;width: 128px;border-radius: 50%;\"/>\n            </FormItem>\n            </Col>\n          </Row>\n          <FormItem>\n            <Button type=\"primary\" @click=\"handleSubmit('userForm')\">保存</Button>\n          </FormItem>\n        </Form>\n\n        <div v-if=\"currentSelect==='security'\">\n          <h3>\n            <span>安全设置</span>\n          </h3>\n          <Divider/>\n          <p>登陆名</p>\n          <p style=\"color: #9ea7b4\">当前登录名:{{profile.userName}}</p>\n          <Divider/>\n          <p>绑定手机</p>\n          <p style=\"color: #9ea7b4\">\n            <span v-if=\"profile.mobile\">已绑定手机：{{profile.mobile}}&nbsp;&nbsp;<a>修改</a></span>\n            <span v-else=\"\">\n               尚未绑定手机 <a>绑定</a>\n            </span>\n          </p>\n          <Divider/>\n          <p>绑定邮箱</p>\n          <p style=\"color: #9ea7b4\">\n            <span v-if=\"profile.email\">已绑定邮箱：{{profile.email}}&nbsp;&nbsp;<a>修改</a></span>\n            <span v-else=\"\">\n               尚未绑定手机 <a>绑定</a>\n            </span>\n          </p>\n          <Divider style=\"color: #9ea7b4\"/>\n        </div>\n      </div>\n    </div>\n  </Card>\n</template>\n\n<script>\n\n  export default {\n    name: 'message_page',\n    data () {\n      return {\n        currentSelect: 'profile',\n        formItemRules: {\n          nickName: [\n            {required: true, message: '昵称不能为空', trigger: 'blur'}\n          ]\n        },\n        profile: this.$store.state.user,\n      }\n    },\n    methods: {\n      handleSubmit(form){\n        if (form === 'userForm') {\n          this.$refs['userForm'].validate((valid) => {\n            if (valid) {\n              updateCurrentUserInfo(this.profile).then(res => {\n                if (res.code === 0) {\n                  this.$Message.success('修改成功')\n                  this.$store.commit(\"setAvatar\", this.profile.avatar)\n                  this.$store.commit(\"setNickName\", this.profile.nickName)\n                }\n              }).finally(() => {\n                this.saving = false\n              })\n            }\n          })\n        }\n      },\n      handleSelect (name) {\n        this.currentSelect = name\n      }\n    },\n    mounted () {\n    }\n  }\n</script>\n\n<style lang=\"less\">\n  .account-setting {\n    &-con {\n      height: ~\"calc(100vh - 176px)\";\n      display: inline-block;\n      vertical-align: top;\n      position: relative;\n      &.left-con {\n        border-right: 1px solid #e6e6e6;\n      }\n      &.view-con {\n        position: absolute;\n        left: 264px;\n        top: 16px;\n        right: 16px;\n        bottom: 16px;\n        overflow: auto;\n        padding: 12px 20px 0;\n      }\n    }\n  }\n</style>\n"]}]}